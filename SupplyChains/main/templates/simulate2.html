<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Simulation_Supply-Chain-2</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/static/css/simulation2.css" rel="stylesheet">

    <script src="/static/js/jscharts.js" type="text/javascript"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/static/js/html5shiv.js"></script>
    <script src="/static/js/respond.js"></script>
    <![endif]-->
    <script>
        function displayTime() {
            var el = document.getElementById("time");
            var time = new Date();
            el.innerHTML = time.toLocaleDateString() + " " + time.toLocaleTimeString();
            setTimeout(displayTime, 1000);

//            var dis_tpDCUS=document.getElementById("dis_transDC2US");
//            var dis_tpDCEU=document.getElementById("dis_transDC2EU");
//
//            var dis_DCUSInv=document.getElementById("dis_inventoryDC_US");
//            var dis_DCEUInv=document.getElementById("dis_inventoryDC_EU");
//
//            dis_tpDCUS.innerHTML=dis_DCUSInv.innerHTML;
//            dis_tpDCEU.innerHTML=dis_DCEUInv.innerHTML;
        }
        window.onload = displayTime;
    </script>
</head>
<body>
<span id="time"></span>

<div class="container">
    <div class="row">
        <div class="col-sm-6 col-sm-offset-6">
            <div class="col-sm-2">
                <a href="/accounts/logout/" class="btn btn-info" role="button">Log Out</a>
            </div>
            <div class="col-sm-2">
                <a href="/" class="btn btn-info" role="button">Choose Chains</a>
            </div>
        </div>
    </div>
</div>
<!--Simulation Page-->
<div class="container">
    <div class="row">
        <div class="col-lg-8 text-center">
            <h2>Chain 2 Manage Simulation</h2>

            <div class="well well-lg text-info head-desc">Supply Chain 2: this is a much simpler supply chain. The
                production/shipping for US and EU markets are totally separated.
            </div>
        </div>
        <div class="col-sm-4 text-center" style="margin-top: 130px">
            <p style="font-family: FontAwesome">Click <a href="/attribute.xlsx">here</a> to review system's attributes.
            </p>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-sm-2">
        <div class="text-center"><label class="dis_name">Plant</label></div>
        <img class="img-responsive" src="/static/img/factory.png">

    </div>
    <div class="col-sm-1">
        <img class="img-responsive" style="margin-top: 120px" src="/static/img/arrow.jpg">
    </div>
    <div class="col-sm-2">
        <div class="text-center"><label class="dis_name">DC</label></div>
        <img class="img-responsive" style="margin-top: 30px" src="/static/img/Simulation-DC.jpg">

        <div class="panel panel-primary">
            <div class="panel-heading panelhead-cus">Inventory</div>
            <div class="panel-body panel-text"><label class="dis_label" id="dis_inventoryDC_US">{{ DCUSInv }}</label>
            </div>
        </div>
    </div>
    <div class="col-sm-1">
        <img class="img-responsive" style="margin-top: 120px" src="/static/img/arrow.jpg">
    </div>
    <div class="col-sm-2">
        <div style="margin-top: 80px">
            <img src="/static/img/ship.jpg" class="img-responsive center-block">

            <div class="panel panel-primary trans-cus">
                <div class="panel-heading"><h3 class="panel-title">Transport</h3></div>
                <div class="panel-body">
                    <label class="control-label dis_transDC2US" id="dis_transDC2US">{{ TPDCUS }}</label>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-1">
        <img class="img-responsive" style="margin-top: 120px" src="/static/img/arrow.jpg">
    </div>
    <div class="col-sm-2">
        <div style="margin-top: 80px">
            <div class="text-center"><label>US</label></div>
            <img src="/static/img/demand.jpg" class="img-responsive center-block">
        </div>
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Sale</h3>
            </div>
            <div class="panel-body">
                <label class="dis_label" id="dis_saleUS">{{ SalesUS }}</label>
            </div>
        </div>
    </div>
    <div class="col-sm-1">
        <div style="margin-top: 100px">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Inventory</h3>
                </div>
                <div class="panel-body">
                    <label class="dis_label" id="dis_inventoryUS">{{ USInv }}</label>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-sm-2">
        <div class="text-center"><label class="dis_name">Plant</label></div>
        <img class="img-responsive" src="/static/img/factory.png">
    </div>
    <div class="col-sm-1">
        <img class="img-responsive" style="margin-top: 120px" src="/static/img/arrow.jpg">
    </div>
    <div class="col-sm-2">
        <div class="text-center"><label class="dis_name">DC</label></div>
        <img class="img-responsive" style="margin-top: 30px" src="/static/img/Simulation-DC.jpg">

        <div class="panel panel-primary">
            <div class="panel-heading panelhead-cus">Inventory</div>
            <div class="panel-body panel-text"><label class="dis_label" id="dis_inventoryDC_EU">{{ DCEUInv }}</label>
            </div>
        </div>
    </div>
    <div class="col-sm-1">
        <img class="img-responsive" style="margin-top: 120px" src="/static/img/arrow.jpg">
    </div>
    <div class="col-sm-2">
        <div style="margin-top: 80px">
            <img src="/static/img/ship.jpg" class="img-responsive center-block">

            <div class="panel panel-primary trans-cus">
                <div class="panel-heading"><h3 class="panel-title">Transport</h3></div>
                <div class="panel-body">
                    <label class="control-label dis_transDC2US" id="dis_transDC2EU">{{ TPDCEU }}</label>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-1">
        <img class="img-responsive" style="margin-top: 120px" src="/static/img/arrow.jpg">
    </div>
    <div class="col-sm-2">
        <div style="margin-top: 80px">
            <div class="text-center"><label>EU</label></div>
            <img src="/static/img/demand.jpg" class="img-responsive center-block">
        </div>
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Sale</h3>
            </div>
            <div class="panel-body">
                <label class="dis_label" id="dis_salesEU">{{ SalesEU }}</label>
            </div>
        </div>
    </div>
    <div class="col-sm-1">
        <div style="margin-top: 100px">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Inventory</h3>
                </div>
                <div class="panel-body">
                    <label class="dis_label" id="dis_inventoryEU">{{ EUInv }}</label>
                </div>
            </div>
        </div>
    </div>
</div>

{% if form_disp %}
    <div class="row">
        <div class="col-sm-11 col-sm-offset-1">
            <form class="form-horizontal" action="/simulate2/?now={{ now }}" method="post">{% csrf_token %}
                <div class="form-group">
                    <label for="Prod" class="col-sm-2 control-label">Input US Production:</label>

                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="Prod" name="ProdUS" placeholder="US Production"
                               required autofocus>
                    </div>
                </div>
                <div class="form-group">
                    <label for="DCUS" class="col-sm-2 control-label">Input EU Production:</label>

                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="DCUS" name="ProdEU" placeholder="EU Production"
                               required autofocus>
                    </div>
                </div>
                <input type="hidden" name="now" value="{{ now }}"/>

                <div class="form-group">
                    <div class="col-sm-3 col-sm-offset-2">
                        <input type="submit" class="btn btn-block btn-info btn-lg run-cus" value="RUN">
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endif %}

<div class="row" style="margin-top: 50px">
    <div class="col-sm-8">
        <div class="well">
            <div class="row">
                <div class="col-sm-3">
                    <h3 class="text-center text-success profit-head">Total Profit:</h3>
                </div>
                <div class="col-sm-7">
                    <label class="control-label text-right profit-text center-block"
                           id="totalprofit_chain2">{{ Profit }}</label>
                </div>
                <div class="col-sm-1">
                    <label class="profit-text">USD</label>
                </div>
            </div>
        </div>
    </div>
    <div id="profitChart" class="col-sm-4 charts">
    </div>
</div>

{% for node in ProfitData %}
    <label hidden id="Profit{{ node.id }}">{{ node.profit }}</label>
{% endfor %}


<script type="text/javascript">
    var N ={{ now }};
    if (N > 2) {
        var dataProfit = new Array(N - 1);

        for (var i = 1; i <= dataProfit.length; i++) {
            dataProfit[i - 1] = document.getElementById('Profit' + i).innerHTML;
        }

        var myData = new Array(N - 1);
        for (var i = 1; i <= myData.length; i++) {
            myData[i - 1] = [i, parseFloat(dataProfit[i - 1])];
        }

        var myChart = new JSChart('profitChart', 'line');
        myChart.setDataArray(myData);
        myChart.setTitle('Chain 2 Profit');
        myChart.setTitleColor('#8E8E8E');
        myChart.setTitleFontSize(11);
        myChart.setLineWidth(3);
        myChart.setAxisNameX('Period');
        myChart.setAxisNameY('');

        myChart.setAxisColor('#BFD402');
        myChart.setAxisValuesColor('#95A605');
        myChart.setSize(616, 321);


        myChart.draw();
    }
</script>
<!--jQuery and Bootstrap-->
<script src="/static/js/jquery-1.11.3.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<!--<script src="/static/js/simuchain2_run.js"></script>-->
</body>
</html>